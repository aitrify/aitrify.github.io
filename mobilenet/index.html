<script src="https://unpkg.com/@tensorflow/tfjs"></script>  
<script src="https://unpkg.com/@tensorflow-models/mobilenet"></script>  
<pre id="console"></pre>  
<video style="display:block; margin: 0 auto;" autoplay playsinline muted id="webcam" width="640" height="480"></video>

<script>  
const webcamElement = document.getElementById('webcam');

function setupWebcam() {  
    return new Promise((resolve, reject) => {
        const navigatorAny = navigator;
        navigator.getUserMedia = navigator.getUserMedia ||
            navigatorAny.webkitGetUserMedia || navigatorAny.mozGetUserMedia ||
            navigatorAny.msGetUserMedia;
        if (navigator.getUserMedia) {
            navigator.getUserMedia({ video: true },
                stream => {
                    webcamElement.srcObject = stream;
                    webcamElement.addEventListener('loadeddata', () => resolve(), false);
                },
                error => reject());
        } else {
            reject();
        }
    });
}

var net  
// Load the model.
mobilenet  
    .load()
    .then(mnet => {
        net = mnet
        console.log('Sucessfully loaded model');
        // setup the webcam
        return setupWebcam();
    }).then(() => {
        // run classification

        setInterval(() => {
            net.classify(webcamElement)
                .then(result => {
                    document.getElementById("console").innerText = JSON.stringify(result, "", "\t")
                })
        }, 1000)

    })
</script>
